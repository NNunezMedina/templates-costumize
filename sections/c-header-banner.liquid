<style>
  #{{ section.id }} {
    font-size: 16px;
    {% if section.settings.hide_from == true %}
      {% if page.url contains '/pages/x-page' %}display: none;{% endif %}
    {% endif %}
  }

  #{{ section.id }} .c-section-top {
    align-items: {{ section.settings.section_top_alignment }};
    text-align: {{ section.settings.text_alignment }};
  }

  #{{ section.id }} .c-a-wrapper {
    display: flex;
  }

  #{{ section.id }} .c-a-bar .page-width {
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
    gap: 0.5em;
  }

  #{{ section.id }} .c-a-bar {
    display: none;
    width: 100%;
    padding-top: {{ section.settings.padding_top }}em;
    padding-bottom: {{ section.settings.padding_bottom }}em;
    font-size: {{ section.settings.font_size }};
  }

  #{{ section.id }} .c-a-bar.active {
    display: flex;
  }

  #{{ section.id }} .c-a-bar.active .page-width {
    animation-name: c-opacity;
    animation-duration: 1s;
  }

  @keyframes c-opacity {
    from {opacity: 0;}
    to {opacity: 1;}
  }

  #{{ section.id }} .c-a-bar-button {
    padding: 0.2em 1.2em;
    border-radius: 999px;
    font-weight: 700;
    font-size: 0.8em;
    min-width: fit-content;
    transition: .2s ease;
    display: flex;
  }

  /* #{{ section.id }} .c-a-bar-middle {
    margin-left: 0.3em;
    margin-right: 0.3em;
  } */

  #{{ section.id }} .c-a-bar:hover .c-a-bar-button {
    background-color: #000 !important;
  }

  @media (max-width: {{ settings.c_breakpoint3 }}px) {
    #{{ section.id }} .c-a-bar .page-width {
      padding: 0em 0.25em;
    }
    
    #{{ section.id }} .c-a-bar {
      font-size: {{ section.settings.font_size_mobile }};
      line-height: 1.2;
    }

    #{{ section.id }} .c-a-bar-button {
      font-size: 0.7em;
      padding: 0.3em 0.75em;
    }
  }

  @media (max-width: {{ settings.c_breakpoint4 }}px) {
    #{{ section.id }} .c-a-bar .page-width {
      display: block;
    }

    #{{ section.id }} .c-a-bar .page-width p {
      display: inline-block;
    }

    #{{ section.id }} .c-a-bar-button {
      display: inline-block;
    }
  }

  @media (max-width: {{ settings.c_breakpoint3 }}px) {
  }
</style>


<section id="{{ section.id }}" class="c-section">
  <div class="c-a-wrapper {% if section.settings.full_width == false %}page-width{% endif %}">
    {% for block in section.blocks %}
      <{% if block.settings.block_url %}a href="{{ block.settings.block_url }}"{% else %}div{% endif %}
      {% if block.settings.new_tab == true %}target="_blank"{% endif %}
      class="c-a-bar {% if forloop.first %}active{% endif %}" style="
        color: {{ block.settings.block_text_color }};
        background-color: {{ block.settings.block_bg_color }};
      ">
        <div class="page-width">
          {% if block.settings.block_heading != empty %}
            <p>{{ block.settings.block_heading }}</p>
          {% endif %}
          {% if block.settings.button_text != empty %}
            <div class="c-a-bar-button" style="
              color: {{ block.settings.button_text_color }};
              background-color: {{ block.settings.button_bg_color }};
            ">{{ block.settings.button_text }}</div>
          {% endif %}
          {% if block.settings.use_timer == true %}<p id="c-countdown"></p>{% endif %}
        </div>
      </{% if block.settings.block_url %}a{% else %}div{% endif %}>
        {% if block.settings.use_timer == true %}
          <script>
            var countDownDate = new Date("{{ block.settings.timer_date}}").getTime();
                  
            // Update the count down every 1 second
            var x = setInterval(function() {
        
              var now = new Date().getTime();
              var distance = countDownDate - now;
        
              var days = Math.floor(distance / (1000 * 60 * 60 * 24));
              var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
              var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
              var seconds = Math.floor((distance % (1000 * 60)) / 1000);
        
              document.getElementById("c-countdown").innerHTML = days + " Days : " + hours + " Hrs : "
              + minutes + " Min : " + seconds + " Sec";
        
              // If the count down is finished, write some text
              if (distance < 0) {
                clearInterval(x);
                document.getElementById("c-countdown").innerHTML = "ENDED!";
              }
            }, 1000);
          </script>
        {% endif %}
    {% endfor %}
  </div>
</section>


<script>
  if (document.querySelectorAll("#{{ section.id }} .c-a-bar").length > 1) {
    var c_a_slideIndex = 0;

    function c_a_showSlides() {
      var c_a_slides = document.querySelectorAll("#{{ section.id }} .c-a-bar");
      for (let i = 0; i < c_a_slides.length; i++) {
        c_a_slides[i].classList.remove("active");
      }
      c_a_slideIndex++;
      if (c_a_slideIndex > c_a_slides.length) {
        c_a_slideIndex = 1;
      }    
      c_a_slides[c_a_slideIndex - 1].classList.add("active");  
      setTimeout(c_a_showSlides, {{ section.settings.interval | times: 1000 }});
    }

    c_a_showSlides();
  }
</script>


{% schema %}
  {
    "name": "C Header Banner",
    "class": "c-hb-header-banner",
    "blocks": [
      {
        "name": "Bar",
        "type": "Bar",
        "limit": 50,
        "settings": [
          {
            "type": "text",
            "id": "block_heading",
            "label": "Heading",
            "default": "My heading"
          },
          {
            "type": "color",
            "id": "block_bg_color",
            "label": "Background color",
            "default": "#5d3be4"
          },
          {
            "type": "color",
            "id": "block_text_color",
            "label": "Text color",
            "default": "#fff"
          },
          {
            "type": "header",
            "content": "Button"
          },
          {
            "type": "text",
            "id": "button_text",
            "label": "Button text",
            "default": "BUY NOW"
          },
          {
            "type": "url",
            "id": "block_url",
            "label": "Block Link"
          },
          {
            "type": "checkbox",
            "id": "new_tab",
            "label": "Open in new tab",
            "default": false
          },
          {
            "type": "checkbox",
            "id": "use_timer",
            "label": "Use timer",
            "default": false
          },
          {
            "type": "text",
            "id": "timer_date",
            "label": "Timer date",
            "default": "Jan 5, 2025 05:00:01"
          },
          {
            "type": "color",
            "id": "button_bg_color",
            "label": "Button background color",
            "default": "#000000"
          },
          {
            "type": "color",
            "id": "button_text_color",
            "label": "Text color",
            "default": "#fff"
          }
        ]
      }
    ],
    "settings": [
      {
        "type": "number",
        "id": "interval",
        "label": "Time interval in seconds",
        "default": 5
      },
      {
        "type": "text",
        "id": "font_size",
        "label": "Font size",
        "default": "1em"
      },
      {
        "type": "text",
        "id": "font_size_mobile",
        "label": "Font size mobile",
        "default": "0.85em"
      },
      {
        "type": "checkbox",
        "id": "hide_from",
        "label": "Hide from X page",
        "default": false
      },
      {
        "type": "checkbox",
        "id": "full_width",
        "label": "Full width?",
        "default": true
      },
      {
        "type": "header",
        "content": "Section Top"
      },
      {
        "type": "select",
        "id": "section_top_alignment",
        "label": "Section Top Alignment",
        "default": "center",
        "options": [
          {
            "value": "flex-start",
            "label": "Left"
          },
          {
            "value": "center",
            "label": "Center"
          },
          {
            "value": "flex-end",
            "label": "Right"
          }
        ]
      },
      {
        "type": "select",
        "id": "text_alignment",
        "label": "Text alignment",
        "default": "center",
        "options": [
          {
            "value": "left",
            "label": "Left"
          },
          {
            "value": "center",
            "label": "Center"
          },
          {
            "value": "right",
            "label": "Right"
          }
        ]
      },
      {
        "type": "header",
        "content": "Section Padding"
      },
      {
        "type": "range",
        "id": "padding_top",
        "label": "Padding top",
        "min": 0,
        "max": 4,
        "step": 0.1,
        "default": 0.5,
        "unit": "rem"
      },
      {
        "type": "range",
        "id": "padding_bottom",
        "label": "Padding bottom",
        "min": 0,
        "max": 4,
        "step": 0.1,
        "default": 0.5,
        "unit": "rem"
      }
    ],
    "presets": [
      {
        "name": "C Header Banner"
      }
    ]
  }
{% endschema %}